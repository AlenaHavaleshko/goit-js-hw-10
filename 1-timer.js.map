{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["\nimport flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport '../css/styles.css';\n\nconst startBtn = document.querySelector('button[data-start]');\nconst daysEl = document.querySelector('[data-days]');\nconst hoursEl = document.querySelector('[data-hours]');\nconst minutesEl = document.querySelector('[data-minutes]');\nconst secondsEl = document.querySelector('[data-seconds]');\n\nlet userSelectedDate = null;\nlet intervalId = null;\n\nstartBtn.disabled = true;\n\nconst options = {\n  dateFormat: \"Y-m-d\",\n  enableTime: true,         // Enables time picker\n  time_24hr: true,          // Displays time picker in 24 hour mode without AM/PM selection when enabled.\n  defaultDate: new Date(),  // Sets the initial selected date(s).\n  minuteIncrement: 1,       // Adjusts the step for the minute input (incl. scrolling)\n  onClose(selectedDates) {\n\n    const selected = selectedDates[0];\n\n    if (selected <= new Date()) {\n      iziToast.warning({\n        title: '!!!',\n        message: 'Please, choose a date in the future',\n        position: 'topRight'\n      });\n      startBtn.disabled = true;\n    } else {\n      userSelectedDate = selected;\n      startBtn.disabled = false;\n    }\n  }\n};\n\nflatpickr(\"#datetime-picker\", options);              // з бібліотеки flatpickr\n\nstartBtn.addEventListener('click', onButtonClick);   // вішаю прослуховувач події на кнопку\n\nfunction onButtonClick() {                           // при натисканні на кнопку старт\n\n  intervalId = setInterval(() => {\n    const diffMS = userSelectedDate - new Date();    // різниця обраної дати і карент дати\n    if (diffMS <= 0) {\n      clearInterval(intervalId);\n      iziToast.success({\n        title: '✔',\n        message: 'Time is up!',\n        position: 'topRight',\n      });\n      return;                                        // зупиняю виконання коду,щоб не ішло у -\n    }\n\n    const timeObj = convertMs(diffMS);\n    updateClock(timeObj);\n\n  }, 1000);\n\n  startBtn.disabled = true;\n}\n\nfunction updateClock({ days, hours, minutes, seconds }) {\n  let d = daysEl.textContent = days.toString().padStart(2, '0');  // Add 0 before\n  let h = hoursEl.textContent = hours.toString().padStart(2, '0');\n  let m = minutesEl.textContent = minutes.toString().padStart(2, '0');\n  let s = secondsEl.textContent = seconds.toString().padStart(2, '0');\n\n  return `${d}:${h}:${m}:${s}`;\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time \n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n\n  const days = Math.floor(ms / day);                                         // Remaining days \n  const hours = Math.floor((ms % day) / hour);                             // Remaining hours \n  const minutes = Math.floor(((ms % day) % hour) / minute);               // Remaining minutes \n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);   // Remaining seconds \n\n  return { days, hours, minutes, seconds };\n}\n"],"names":["startBtn","daysEl","hoursEl","minutesEl","secondsEl","userSelectedDate","intervalId","options","selectedDates","selected","iziToast","flatpickr","onButtonClick","diffMS","timeObj","convertMs","updateClock","days","hours","minutes","seconds","d","h","m","ms"],"mappings":"+IAOA,MAAMA,EAAW,SAAS,cAAc,oBAAoB,EACtDC,EAAS,SAAS,cAAc,aAAa,EAC7CC,EAAU,SAAS,cAAc,cAAc,EAC/CC,EAAY,SAAS,cAAc,gBAAgB,EACnDC,EAAY,SAAS,cAAc,gBAAgB,EAEzD,IAAIC,EAAmB,KACnBC,EAAa,KAEjBN,EAAS,SAAW,GAEpB,MAAMO,EAAU,CACd,WAAY,QACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CAErB,MAAMC,EAAWD,EAAc,CAAC,EAE5BC,GAAY,IAAI,MAClBC,EAAS,QAAQ,CACf,MAAO,MACP,QAAS,sCACT,SAAU,UAClB,CAAO,EACDV,EAAS,SAAW,KAEpBK,EAAmBI,EACnBT,EAAS,SAAW,GAEvB,CACH,EAEAW,EAAU,mBAAoBJ,CAAO,EAErCP,EAAS,iBAAiB,QAASY,CAAa,EAEhD,SAASA,GAAgB,CAEvBN,EAAa,YAAY,IAAM,CAC7B,MAAMO,EAASR,EAAmB,IAAI,KACtC,GAAIQ,GAAU,EAAG,CACf,cAAcP,CAAU,EACxBI,EAAS,QAAQ,CACf,MAAO,IACP,QAAS,cACT,SAAU,UAClB,CAAO,EACD,MACD,CAED,MAAMI,EAAUC,EAAUF,CAAM,EAChCG,EAAYF,CAAO,CAEpB,EAAE,GAAI,EAEPd,EAAS,SAAW,EACtB,CAEA,SAASgB,EAAY,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CACtD,IAAIC,EAAIpB,EAAO,YAAcgB,EAAK,SAAQ,EAAG,SAAS,EAAG,GAAG,EACxDK,EAAIpB,EAAQ,YAAcgB,EAAM,SAAQ,EAAG,SAAS,EAAG,GAAG,EAC1DK,EAAIpB,EAAU,YAAcgB,EAAQ,SAAQ,EAAG,SAAS,EAAG,GAAG,EAC9D,EAAIf,EAAU,YAAcgB,EAAQ,SAAQ,EAAG,SAAS,EAAG,GAAG,EAElE,MAAO,GAAGC,CAAC,IAAIC,CAAC,IAAIC,CAAC,IAAI,CAAC,EAC5B,CAEA,SAASR,EAAUS,EAAI,CAQrB,MAAMP,EAAO,KAAK,MAAMO,EAAK,KAAG,EAC1BN,EAAQ,KAAK,MAAOM,EAAK,MAAO,IAAI,EACpCL,EAAU,KAAK,MAAQK,EAAK,MAAO,KAAQ,GAAM,EACjDJ,EAAU,KAAK,MAASI,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAP,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}